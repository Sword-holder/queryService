# deepDiagnosis
这是一个关于故障诊断的多轮问答系统
# 使用方式
### 1、将项目clone到本地，解压
### 2、运行后端java程序  
### 3、运行前端server服务器  
### 4、运行测试程序  
### 5、输入问题，等待回答
# 工作原理
系统分为前端和后端，前端负责接口呈现、与用户进行交互的部分，后端负责搜索答案的部分。  
前端采用python的flask框架，它用于接受请求，并交给后端处理。  
后端使用java编写，搜索答案的过程类似于搜索引擎的原理，在预处理时，先对文档进行分词，再生成索引表，当询问到达时，用同样的方式进行分词，再对这些词进行散列，并形成打分的结果列表。。然后我自定义了一套筛选规则，将仅仅是擦到一点边的答案给过滤掉，并优化了询问过程。这一系列操作使用的时Apache的Lucene开源库。  
前后端之间的通讯采用socket，也就是基于传输层及以下的协议进行通信，另外我还自己规定了一些规则，如后端"disc"结尾的意味着主动断开连接，"next"表示进行下一次询问。  
前端采用RESTful风格的接口定义，详细请参见[接口文档]。  
另外，我还自己写了一个测试程序，运行该程序可直接连接客服，用于方便地测试程序效果，程序放在./src/server/test/test.py  
处理完的文档文件放在./info中，下面的每一个文件夹对应的是一个字段的信息  
# 开发过程
首先在预处理过程中，将文本中的有关于该问题的信息提取，包括问题描述、产品、版本、平台、解决方案，这部分我尝试了用程序去批处理，但因为文档结构太不规整，效果不够理想。因此在测试时，仅使用了人工处理的25个问题作为样例。  
接着是对这些文档进行扫描，生成倒排的索引表。  
搜索答案时会将索引表读入内存，然后直接散列到答案，速度非常快，不存在性能上的问题。  
但这种方式存在缺陷，就是说搜索的词偏向于词的堆叠，词与词之间的关系无法从搜索中体现出来。  
因此我又尝试了引入知识图谱的方式，但在用户询问的自然语言处理中遇到了严重瓶颈，因此放弃。  